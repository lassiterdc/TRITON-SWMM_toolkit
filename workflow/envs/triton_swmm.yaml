# Lightweight execution environment for TRITON-SWMM simulation tasks
#
# IMPORTANT: This environment is for individual Snakemake rule tasks (runner scripts),
# NOT for Snakemake itself.
#
# Architecture:
# - Main environment (root environment.yaml): Contains Snakemake + orchestration tools
# - Task environment (this file): Contains only runtime dependencies for simulations
#   (SWMM, scientific Python stack, geospatial tools, data I/O)
#
# This separation allows:
# 1. Snakemake to run in the primary conda environment
# 2. Each simulation task to run in this lighter cached environment
# 3. Faster environment creation on HPC systems (fewer packages)
# 4. Isolation between orchestration and execution layers
#
# When Snakemake rules invoke runner scripts (run_single_simulation.py, etc.),
# they use this environment via the Snakefile 'conda:' directive.

name: triton_swmm_toolkit
channels:
  - conda-forge
dependencies:
  - python=3.11
  - typer
  - pydantic
  - pyyaml
  - zarr
  - netcdf4
  - scipy
  - pydap
  - h5netcdf
  - cftime
  - bottleneck
  - dask
  - matplotlib
  - seaborn
  - sparse
  - pint
  - bagit
  - openpyxl
  # geospatial packages
  - rioxarray
  - cartopy
  - geopandas
  - fiona
  - pyproj
  - shapely
  # other stuff
  - coverage
  - pytest
  - ruff
  - ty
  - ipdb
  - ipykernel
  - pip
  - pip:
      - hsclient
      - pyswmm
      - swmmio
      - tabulate
      - notebook
      - jupyter_server
      - ipywidgets
